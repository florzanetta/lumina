{% extends "lumina/base.html" %}
{% load humanize %}
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>{% block title %}Lumina - Presupuesto de sesión{% endblock %}</title>
</head>
<body>

{% block content %}

    <h3>Presupuesto de sesion</h3>

    <form action="." method="post">
        {% csrf_token %}

    <table class="table">
    
        {% include 'lumina/include/sessionquote_details_readonly.html' %}
        
        <!--
        <tr>
            <th width="20%">Cliente:</th>
            <td width="80%">{{ object.customer.name }}</td>
        </tr>
        <tr>
            <th>Imágenes:</th>
            <td>{{ object.image_quantity|intcomma }}</td>
        </tr>
        <tr>
            <th>Costo:</th>
            <td>$&nbsp;{{ object.cost|intcomma }}</td>
        </tr>
        <tr>
            <th>
                Estado:
            </th>
            <td>{{ object.get_status_display }}
                &nbsp;&nbsp;
                <a href="#helpModal" role="button"
                    class="btn btn-primary btn-mini"
                    data-toggle="modal"><i class="icon-question-sign icon-white"></i> Ayuda</a>
            </td>
        </tr>

        <tr>
            <th>Condiciones:</th>
            <td><pre>{{ object.terms }}</pre>
            {% if show_accept_terms_checkbox %}
                <label for="accept_terms"><input
                    type="checkbox" id="accept_terms" name="accept_terms"> Acepto las condiciones</label>
            {% endif %}
            </td>
        </tr>
        -->

        <tr>
            <th>Presupuesto alternativos:</th>
            <td>
                {% if object.quote_alternatives.all %}
                    <table class="table table-condensed table-hover table-bordered">
                        {% for alt in object.quote_alternatives.all %}
                            <tr><td>{{ alt.image_quantity|intcomma }}</td><td>$ {{ alt.cost|intcomma }}</td></tr>
                        {% endfor %}
                    </table>
                {% else %}
                    <em>Sin presupuestos alternativos</em>
                {% endif %}
                
            </td>
        </tr>
        
        {% if object.status == 'A' %}
            <tr>
                <th>
                    Aceptado por:
                </th>
                <td>
                    {{ object.accepted_rejected_by }}
                    -
                    {{ object.accepted_rejected_at }}
                </td>
            </tr>
        {% endif %}
        {% if object.status == 'R' %}
            <tr>
                <th>
                    Rechazado por:
                </th>
                <td>
                    {{ object.accepted_rejected_by }}
                    -
                    {{ object.accepted_rejected_at }}
                </td>
            </tr>
        {% endif %}
    </table>

        {% for extra_button in extra_buttons %}
            <input type="submit"
                name="{{ extra_button.name }}"
                value="{{ extra_button.submit_label }}"
                id="button_id_{{ extra_button.name }}"
                class="btn btn-primary"
                {% if extra_button.confirm %}onclick="return confirm('¿Seguro?');"{% endif %}>
        {% endfor %}
        </form>

    {% include 'lumina/include/sessionquote_details_help.html' %}

{% endblock content %}


{% block javascript_bottom %} 

<script type="text/javascript">

$(function() {
	$('#button_id_button_accept').attr('disabled', 'disabled');
    $('#accept_terms').click(function() {
        if ($(this).is(':checked')) {
            $('#button_id_button_accept').removeAttr('disabled');
        } else {
            $('#button_id_button_accept').attr('disabled', 'disabled');
        }
    });
});

</script>

{% endblock %}


</body>
</html>
